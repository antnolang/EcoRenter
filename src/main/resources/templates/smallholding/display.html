<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{master-page/layout :: layout(~{::title}, ~{::div.content})}">

<head>
    <title>Mostrando parcela</title>
    <script src="https://js.stripe.com/v3/"></script>
</head>


<body>
    <div class="content">
        <section class="services2 cid-rRNDCjx6s4" id="services2-q">

            <div class="container">
                <div class="col-md-12">
                    <div class="media-container-row">

                        <div class="mbr-figure" style="width: 50%;">
                            <div class="mySlider">
								<div class="jumboslider-viewport">
									<div class="jumboslider-overview"
										th:each="ph_im,iterador : ${photo_imageData}">
										<div class="jumboslider-item">
											<img class="d-block w-100"
												th:src="@{'data:' + ${ph_im.key.suffix} + ';base64, ' + ${ph_im.value}}"
												th:alt="${ph_im.key.name}" width="100%">
										</div>
									</div>
								</div>
							</div>
							</div>

                        <div class="align-left aside-content">
                            <h2 class="mbr-title pt-2 mbr-fonts-style display-2">
								<span th:text="${smallholding.title}"></span>
							</h2>
                            <div class="mbr-section-text">
                                <p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7">
                                    <strong>Tamaño:</strong> <span th:text="${smallholding.size}"></span>
                                </p>
                                <p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7">
                                    <strong>Descripción:</strong> <span th:text="${smallholding.description}"></span>
                                </p>
                                <p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7">
                                    <strong>Tipo de cultivo:</strong> <span th:text="${smallholding.farmingType}"></span>
                                </p>
                                <p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7">
                                    <strong>Provincia:</strong> <span th:text="${smallholding.province}"></span>
                                </p>
                                <p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7">
                                    <strong>Localidad:</strong> <span th:text="${smallholding.locality}"></span>
                                </p>
                                <!--<p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7"><strong>Dirección:</strong>
                                    <span th:text="${smallholding.address}"></span></p>
								<p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7"><strong>Código postal:</strong>
                                    <span th:text="${smallholding.postalCode}"></span></p>-->
                                <p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7">
                                    <strong>Estado:</strong> <span th:text="${smallholding.status}"></span>
                                </p>
                                <!--<p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7"><strong>Latitud:</strong>
                                    <span th:text="${smallholding.latitude}"></span></p>
								<p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7"><strong>Longitud:</strong>
                                    <span th:text="${smallholding.longitude}"></span></p>-->
                                <p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7">
                                    <strong>Duración máxima:</strong> <span th:text="${smallholding.maxDuration}"></span>
                                </p>
                                <p sec:authorize="hasAuthority('OWNER')" th:if="${ownerPrincipal}" class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7">
                                    <strong>Activada:</strong> <span th:text="${smallholding.available}"></span>
                                </p>
                                <!--<p class="mbr-text text1 pt-2 mbr-light mbr-fonts-style display-7"><strong>Nombre del propietario:</strong>
                                    <span th:text="${smallholding.owner.fullname}"></span></p>-->

                                <p class="mbr-text text2 pt-4 mbr-light mbr-fonts-style display-2">
                                    <span th:text="${smallholding.price}"></span> €/mes
                                </p>
                                

                                <!--Btn-->

                                <div sec:authorize="hasAuthority('RENTER')" onclick="desapareceAlquilar()" th:if="${!isRentedByRenter}" id="btn-alquilar" class="mbr-section-btn pt-3 align-left">
                                    <a class="btn btn-secondary-outline display-4">Alquilar
										parcela</a>
                                </div>
                                <div sec:authorize="hasAuthority('RENTER')" th:if="${isRentedByRenter}" class="mbr-section-btn pt-3 align-left">
                                    <a href="" class="btn btn-secondary-outline display-4">Contactar con
										el propietario</a>
                                </div>
                                <div sec:authorize="hasAuthority('OWNER')" th:if="${smallholding.status == 'NO ALQUILADA' && ownerPrincipal}" class="mbr-section-btn pt-3 align-left">
                                    <a th:href="@{'/owner/smallholding/edit?smallholdingId=' + ${smallholding.id}}" class="btn btn-secondary-outline display-4">Editar parcela</a>
                                </div>
                                <div sec:authorize="hasAuthority('OWNER')" th:if="${smallholding.status == 'NO ALQUILADA' && ownerPrincipal && smallholding.available}" class="mbr-section-btn pt-3 align-left">
                                    <a th:href="@{'/owner/smallholding/deactivate?smallholdingId=' + ${smallholding.id}}" class="btn btn-secondary-outline display-4">Desactivar
										parcela</a>
                                </div>
                                <div sec:authorize="hasAuthority('OWNER')" th:if="${smallholding.status == 'NO ALQUILADA' && ownerPrincipal && !smallholding.available}" class="mbr-section-btn pt-3 align-left">
                                    <a th:href="@{'/owner/smallholding/activate?smallholdingId=' + ${smallholding.id}}" class="btn btn-secondary-outline display-4">Activar
										parcela</a>
                                </div>

                                <br><br>
                       
                                
                                <div th:if="${errorPay == 'No se ha podido realizar el pago correctamente' }">
									<div class="alert"
										style="padding: 20px; background-color: red; color: white;">
										<span class="closebtn"
											style="margin-left: 15px; color: white; font-weight: bold; float: right; font-size: 22px; line-height: 20px; cursor: pointer; transition: 0.3s;"
											onclick="this.parentElement.style.display='none';">&times;</span>
										<strong th:text="${errorPay}"> </strong>
									</div>

								</div>

                                

                                <!-- Pago -->

                                <form sec:authorize="hasAuthority('RENTER')" id="payment-form" style="display: none;" th:action="@{'/renter/smallholding/rent?smallholdingId=' + ${smallholding.id}}" method="post" class="sr-payment-form">
                                    <div class="sr-combo-inputs-row">
                                        <div class="col">
                                            <label for="card"> Tarjeta de crédito </label>
                                            <input id="card" name="card" placeholder="XXXXXXXXXXXXXXXX" pattern="[0-9]{13,16}" />
                                        </div>
                                    </div>

                                    <div class="sr-combo-inputs-row">
                                        <div class="col">
                                            <label for="fecha"> Fecha expiración </label>
                                            <input pattern="(?:0[1-9]|1[0-2])/[0-9]{2}" id="fecha" name="fecha" required = "required" placeholder="XX/XX" />
                                        </div>
                                    </div>

                                    <div class="sr-combo-inputs-row">
                                        <div class="col">
                                            <label for="cvv"> CVV </label>
                                            <input  pattern="^[0-9]{3,4}$" id="cvv" name="cvv" placeholder="XXX" required = "required" />
                                        </div>
                                    </div>
                               <div data-for="message" class="col-md-12 form-group">
								<span class="gdpr-block"> <label> <span
										class="textGDPR" style="color: #a7a7a7"><input
											type="checkbox" name="gdpr" id="gdpr-form1-17" required="">
											Para publicar una parcela debes aceptar nuestras <a
											target="_blank"
											style="color: #149dcc; text-decoration: none;"
											href="/miscellaneous/condiciones-arrendamiento">condiciones
												de arrendamiento</a>. </span>
								</label>
								</span>
							</div>

                                    <!-- Display mandate acceptance text. -->

                                    <button id="confirm-mandate" name="saveRent" type="submit" class="btn btn-form btn-secondary display-4">Pagar</button>
                                </form>


                            </div>

                        </div>
                    </div>
                </div>
            </div>

            

            <div class="content">

                <div class="container">
                    <div class="row justify-content-center">
                        <!--Titles-->
                        <div class="col-12">
                            <h1 class="align-left pb-3 mbr-fonts-style display-2">
								Comentarios:</h1>

                        </div>

                        <div class="container" th:each="co : ${comments}">
                            <p class="mbr-title mbr-fonts-style display-5" th:text="${co.writtenMoment}"></p>
                            <p class="mbr-text mbr-fonts-style display-7" th:text="${co.text}"></p>
                            <br>

                        </div>

                        <div th:if="${comments.size() == 0}">
                            <span>No hay comentarios disponibles</span>
                        </div>

                    </div>
        </section>
        </div>
</body>

</html>